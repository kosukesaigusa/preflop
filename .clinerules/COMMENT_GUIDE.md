# コメント規約

## 1. 基本方針

* [Effective Dart: Documentation](https://dart.dev/effective-dart/documentation) の作法に従うことを目指します。
* コメントはコードの意図を補完し、可読性を高めるために使用します。コードを読めばわかる自明な内容の繰り返しは避けます。
* コメントは常に最新の状態に保ち、コードの変更に合わせて更新します。古い、または誤解を招くコメントは削除します。
* コメントは日本語で記述し、例外なく「。」や「.」で終わる完全な文、または体言止めで記述します。
* **コード内に記述するコメントの文体は「だ・である」調に統一します。** (このガイドライン自体の説明文は「です・ます」調です)

## 2. ドキュメントコメント (`///`)

* **目的:** クラス、メソッド、Enum、トップレベル関数、変数など、公開 API の目的、役割、使用方法を説明するために使用します。
* **記述内容:**
  * 何をするのか（What）を簡潔に記述します。
  * 必要に応じて、**引数**、**戻り値**、発生しうる**例外**について、自然な文章で説明します。引数は角括弧 `[]` で囲んで示すことができます（例: `[userId]`）。
  * 使用例 (`@tool snippet` など) を含めると、より理解しやすくなります。
* **スタイル:**
  * 最初の文は、対象の要素を要約する簡潔な説明にします。
  * Lint ルール (`public_member_api_docs`) での強制はされていませんが、公開 API には記述することを強く推奨します。
* **例 (良い例):**

    ```dart
    /// 指定されたユーザー ID に基づいてユーザー情報を取得する。
    ///
    /// [userId] が存在しない場合は `null` を返す。
    /// ネットワークエラーが発生した場合は `NetworkException` をスローする可能性がある。
    ///
    /// ```dart
    /// final user = await fetchUser(123);
    /// if (user != null) {
    ///   print(user.name);
    /// }
    /// ```
    Future<User?> fetchUser(int userId) async {
      // ... 実装 ...
    }
    ```

## 3. 通常コメント (`//`)

* **目的:** コードブロック内の特定の処理ステップ、複雑なロジック、またはコードだけでは伝わりにくい意図を補足するために使用します。
* **記述内容:**
  * なぜその処理が必要なのか（Why）を説明します。どのように動作するか（How）はコード自体が示すべきです。
  * `NOTE:` や `ignore:` の説明にも使用します。
* **避けるべきコメント:**
  * **自明な処理の説明:** コードを読めばすぐに理解できる内容のコメントは不要です。
    * 悪い例: `// i をインクリメントする` (`i++;`)
    * 悪い例: `// ユーザー名を取得する` (`final name = user.name;`)
    * 悪い例: `// .value でアクセス`
  * **一時的なメモ:** `TODO` コメントは意図的な未実装箇所を示すために使用できますが、それ以外の個人的なメモや一時的なマーカーは避けます。
    * 悪い例: `// あとで修正`
    * 悪い例: `// ↓↓↓ 修正点 ↓↓↓`
  * **思考プロセス:** コードの意図ではなく、開発中の思考過程を記述したコメントは不要です。
    * 悪い例: `// ここで matrix を使うか確認したけどやめた`
  * **コメントアウトされたコード:** 不要になったコードはコメントアウトせず、バージョン管理システム（Git など）を信頼して削除します。デバッグ目的の一時的なコメントアウトは許容されますが、コミット前に削除します。
* **例 (良い例):**

    ```dart
    // ユーザーが特定の権限を持っているか確認する。
    // 管理者権限がない場合は早期リターンする。
    if (!user.isAdmin) {
      return;
    }

    // NOTE: パフォーマンス向上のため、ここではキャッシュされた値を使用する。
    final cachedData = _cache.getData();
    ```
